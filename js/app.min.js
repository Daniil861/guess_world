(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",2500),document.querySelector(".score")&&document.querySelectorAll(".score").forEach((e=>{e.textContent=sessionStorage.getItem("money")}));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),n=document.documentElement.clientWidth;document.documentElement.clientHeight;function a(e,t,o){document.querySelector(e).classList.contains(t)&&document.querySelector(e).classList.remove(t),document.querySelector(e).classList.add(t),setTimeout((()=>{document.querySelector(e).classList.remove(t)}),o)}function r(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}const c={time:60,currentTopic:"empty",movies:["good will hunting","love actualy","high school musical","angry man","ratatouille"],places:["chine town","uluru","table mountain","vancouver","the white house"],art:["ice cream cone","turtle","making","sleeping","scarying"],famous:["zorro","Marilyn Monroe","Marilyn Manson","batman","hulk"],words:[],letters:[[],[],[]],state:1};function i(){let e=gsap.timeline({defaults:{duration:1,ease:"expo.out"}});if(1==c.state)e.to('[data-btn="1"',{x:-n/2,opacity:0}),e.to('[data-btn="3"',{x:-n/2,opacity:0},"<"),e.to('[data-btn="2"',{x:n/2,opacity:0},"<"),e.to('[data-btn="4"',{x:n/2,opacity:0},"<"),e.to(".categories__title",{y:50,opacity:0},"<50%"),e.to(".header",{rotation:-90,opacity:0,onComplete:function(){!function(){document.querySelector(".theme-screen").classList.remove("_hide"),m("theme-screen"),gsap.set(".letter",{opacity:0,y:50,display:"inline-block"});let e=gsap.timeline({defaults:{duration:.5}});e.to(".theme-screen__title",{opacity:1}),e.to(".theme-screen__text",{opacity:1,x:0},"<"),e.to(".theme-screen__buttons",{opacity:1,y:0}),e.to(".letter",{y:0,opacity:1,stagger:.05,ease:"back.out(4)"})}(),document.querySelector(".categories").classList.add("_hide")}},"<50%");else if(4==c.state){document.querySelector(".finaly").classList.add("_hide");let e=gsap.timeline({defaults:{duration:.5}});e.to(".finaly__bottom",{y:50,opacity:0}),e.to(".finaly__box",{x:-100,opacity:0},"<50%"),e.to(".finaly__title",{y:-50,opacity:0},"<50%"),e.to(".header",{rotation:-90,opacity:0,onComplete:function(){c.state=1,p.count=1,document.querySelectorAll(".finaly__resalt-string").forEach((e=>e.remove())),S(_)}},"<50%")}}function l(){let e=gsap.timeline({defaults:{duration:.5}});e.to(".header",{rotation:0,opacity:1}),console.log(c.state),1==c.state?(document.querySelector(".categories").classList.remove("_hide"),e.to(".categories__title",{y:0,opacity:1},"<50%"),e.to('[data-btn="1"',{x:0,opacity:1}),e.to('[data-btn="3"',{x:0,opacity:1},"<"),e.to('[data-btn="2"',{x:0,opacity:1},"<"),e.to('[data-btn="4"',{x:0,opacity:1},"<")):2==c.state&&(document.querySelector(".finaly").classList.remove("_hide"),e.to(".finaly__title",{y:0,opacity:1}),e.to(".finaly__box",{x:0,opacity:1},"<50%"),e.to(".finaly__bottom",{y:0,opacity:1,onComplete:function(){c.state=1}},"<50%"))}function s(){document.querySelector(".finaly").classList.add("_hide"),document.querySelector(".categories").classList.remove("_hide");let e=gsap.timeline({defaults:{duration:.5}});e.to(".finaly__bottom",{y:50,opacity:0}),e.to(".finaly__box",{x:-100,opacity:0},"<50%"),e.to(".finaly__title",{y:-50,opacity:0,onComplete:function(){p.currentThemeArr=[],p.currentWord="",p.time=c.time,p.count=1,document.querySelectorAll(".finaly__resalt-string").forEach((e=>e.remove())),l()}},"<50%")}function u(e){let t=+e.dataset.btn;1==t?c.currentTopic="movies":2==t?c.currentTopic="places":3==t?c.currentTopic="art it out":4==t&&(c.currentTopic="famous people"),c.words=c.currentTopic.split(" "),c.words.forEach(((e,t)=>{c.letters[t]=e.split("")}))}function m(e){document.querySelector(`.${e}__title`).innerHTML="",c.letters.forEach(((t,o)=>{document.querySelector(`.${e}__title`).innerHTML+=`<div class="${e}__word_${o}"> </div>`,t.forEach((t=>{document.querySelector(`.${e}__word_${o}`).innerHTML+=`<span class="letter">${t}</span>`}))}))}function d(e){let t=gsap.timeline({defaults:{duration:.25}});t.to(".theme-screen__buttons",{opacity:0,y:100}),t.to(".theme-screen__text",{opacity:0,x:-100}),t.to(".letter",{opacity:0,y:50,stagger:.05,ease:"back.in(4)",onComplete:function(){document.querySelector(".theme-screen").classList.add("_hide"),e?l():S(_)}})}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main__body").classList.add("_active"),L());const p={fontSize:n<1e3?72:120,currentThemeArr:[],currentWord:"",time:c.time,timerId:!1,count:1};function y(){document.querySelector(".game__text-timer").textContent=c.time,function(){let e=[];"movies"==c.currentTopic?(e=c.movies.slice(),p.currentThemeArr=r(e)):"places"==c.currentTopic?(e=c.places.slice(),p.currentThemeArr=r(e)):"art it out"==c.currentTopic?(e=c.art.slice(),p.currentThemeArr=r(e)):"famous people"==c.currentTopic&&(e=c.famous.slice(),p.currentThemeArr=r(e))}(),b(),x()}function _(){document.querySelector(".game").classList.remove("_hide"),1==c.state&&y(),3==c.state&&(document.querySelector(".game__text-timer").textContent=c.time),gsap.set(".letter",{opacity:0,y:50,display:"inline-block"});let e=gsap.timeline({defaults:{duration:.5}});e.to(".game__timer",{y:0,opacity:1}),e.to(".game__button_right",{x:0,opacity:1},"<50%"),e.to(".game__button_unright",{x:0,opacity:1},"<"),e.to(".letter",{y:0,opacity:1,stagger:.05,ease:"back.out(4)",onComplete:function(){3==c.state&&(c.state=1),q()}})}function g(e){console.log("Hide game screen");let t=gsap.timeline({defaults:{duration:.5}});t.to(".letter",{y:-50,opacity:0}),t.to(".game__timer",{opacity:0}),t.to(".game__button_right",{x:-50,opacity:0}),t.to(".game__button_unright",{x:50,opacity:0,onComplete:function(){var t;e?(t=f,gsap.to(".wrapper",{backgroundImage:"radial-gradient(50% 70.4% at 50% 18.47%, #E338FF 0%, #870EFF 100%)",duration:1,onComplete:t})):v(l),document.querySelector(".game").classList.add("_hide")}},"<")}function f(){console.log("showTimeOverScreen"),document.querySelector(".timeover").classList.remove("_hide");let e=gsap.timeline({defaults:{duration:.5,ease:"sine.in"}});e.to(".timeover__text",{y:0,opacity:1}),e.to(".timeover__button_home",{x:0,opacity:1}),e.to(".timeover__button_play",{x:0,opacity:1},"<")}function h(e){x();let t=gsap.timeline({defaults:{duration:.99}});t.to(".timeover__button_home",{x:-500,opacity:0}),t.to(".timeover__button_play",{x:500,opacity:0},"<"),t.to(".timeover__text",{y:-100,opacity:0,onComplete:function(){e?v(l):_(),document.querySelector(".timeover").classList.add("_hide")}})}function b(){p.currentWord=p.currentThemeArr.pop()}function x(){c.letters=[],c.words=p.currentWord.split(" "),c.words.forEach(((e,t)=>{c.letters[t]=e.split("")})),m("game"),gsap.set(".letter",{opacity:0,y:50,display:"inline-block"})}function S(e){gsap.to(".wrapper",{backgroundImage:"radial-gradient(50% 70.4% at 50% 18.47%, #FF745C 0%, #FF5954 100%)",duration:1,onComplete:e})}function v(e){gsap.to(".wrapper",{backgroundImage:"radial-gradient(124.79% 58.12% at 50% 30.75%, #ffdf38 0%, #ff9c0e 100%)",duration:1,onComplete:e})}function q(){let e=document.querySelector(".game__text-timer");e.textContent=p.time,document.querySelector(".game__buttons").classList.remove("_lock"),p.timerId=setInterval((()=>{p.time--,e.textContent=p.time,p.time<=0&&(clearInterval(p.timerId),console.log("Time is over - the word is unknown!"),C(p.currentWord,"x"),b(),setTimeout((()=>{g(!0)}),500))}),1e3)}function w(){clearInterval(p.timerId),p.currentThemeArr.length>0?(b(),function(){let e=gsap.timeline({defaults:{duration:.75,delay:.25}});(function(){let e=gsap.timeline({defaults:{delay:.25,duration:1.5,ease:"elastic.out(1, 0.5)"}});e.to(".game__timer",{rotate:360,opacity:0,onComplete:function(){p.time=c.time,document.querySelector(".game__text-timer").textContent=p.time}}),e.to(".game__timer",{rotate:0,opacity:1,duration:1.5})})(),e.to(".letter",{y:50,opacity:0,stagger:.05,ease:"back.out(4)",onComplete:function(){x(),gsap.timeline({defaults:{duration:.5}}).to(".letter",{y:0,opacity:1,stagger:.05,ease:"back.out(4)",onComplete:function(){q()}})}})}()):(c.state=2,g(!1),console.log("Слова закончились - показываем итоговый экран"))}function C(e,t){let o=document.createElement("div");o.classList.add("finaly__resalt-string");let n=document.createElement("div");n.classList.add("finaly__number"),n.textContent=`${p.count}.`;let a=document.createElement("div");a.classList.add("finaly__word"),a.textContent=e;let r=document.createElement("div");r.classList.add("finaly__result-circle"),r.textContent=t,o.append(n,a,r),document.querySelector(".finaly__box").append(o)}function L(){document.documentElement.clientWidth/document.documentElement.clientHeight>1&&document.documentElement.clientWidth<1800?document.querySelector(".categories__buttons").style.gridTemplateColumns="repeat(4, 1fr)":document.documentElement.clientWidth/document.documentElement.clientHeight<1&&document.documentElement.clientWidth<1800&&(document.querySelector(".categories__buttons").style.gridTemplateColumns="repeat(2, 1fr)")}document.addEventListener("click",(e=>{let n=e.target;n.closest(".preloader__button")&&gsap.to(n.closest(".preloader__button"),{y:10,boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.5)",duration:.1,yoyo:!0,repeat:1,onComplete:function(){sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main__body").classList.add("_active")}}),n.closest(".categories__button")&&(u(n.closest(".categories__button")),gsap.to(n.closest(".categories__button"),{y:2,duration:.3,boxShadow:"0px 2px 4px 1px #FF890C",yoyo:!0,repeat:1,onComplete:function(){console.log("complete"),i()}})),n.closest('[data-btn="back"]')&&gsap.to(n.closest('[data-btn="back"]'),{y:10,boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.5)",duration:.1,yoyo:!0,repeat:1,onComplete:function(){c.letters=[],d(!0)}}),n.closest('[data-btn="play"]')&&gsap.to(n.closest('[data-btn="play"]'),{y:10,boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.5)",duration:.1,yoyo:!0,repeat:1,onComplete:function(){d(!1)}}),n.closest(".game__button_right")&&(p.currentThemeArr.length>0?a(".game__buttons","_lock",3500):a(".game__buttons","_lock",4e3),gsap.to(n.closest(".game__button_right"),{scale:.9,duration:.1,yoyo:!0,repeat:1,onComplete:function(){console.log("Write next word and restart timer"),console.log("Записываем текущее слово в массив правильных слов"),C(p.currentWord,"v"),p.count++,w()}})),n.closest(".game__button_unright")&&(p.currentThemeArr.length>0?a(".game__buttons","_lock",3500):a(".game__buttons","_lock",4e3),gsap.to(n.closest(".game__button_unright"),{scale:.9,duration:.1,yoyo:!0,repeat:1,onComplete:function(){console.log("Write next word and restart timer"),console.log("Записываем текущее слово в массив НЕправильных слов"),C(p.currentWord,"x"),p.count++,w()}})),n.closest(".timeover__button_home")&&gsap.to(n.closest(".timeover__button_home"),{scale:.9,duration:.1,yoyo:!0,repeat:1,onComplete:function(){c.state=2,h(!0),console.log("Write current results to finaly screen areas"),console.log("Show finaly screen")}}),n.closest(".timeover__button_play")&&(c.state=3,gsap.to(n.closest(".timeover__button_play"),{scale:.9,duration:.1,yoyo:!0,repeat:1,onComplete:function(){console.log("Back to game"),p.time=c.time,p.count++,S(h)}})),n.closest('[data-btn="restart"]')&&gsap.to(n.closest('[data-btn="restart"]'),{scale:.9,duration:.1,yoyo:!0,repeat:1,onComplete:function(){console.log("restart game with current topic"),console.log(c.currentTopic),c.state=4,p.time=c.time,document.querySelector(".game__text-timer").textContent=c.time,i()}}),n.closest('[data-btn="home"]')&&gsap.to(n.closest('[data-btn="home"]'),{scale:.9,duration:.1,yoyo:!0,repeat:1,onComplete:function(){s(),console.log(p.currentThemeArr),console.log("show main buttons"),console.log("delete last game data")}})})),window.addEventListener("resize",L),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();